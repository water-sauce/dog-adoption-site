<!-- Put your final HTML here -->
<!DOCTYPE html>
<html>
<head>
	<title>Pets Galore | A Dog Adoption Agency located in San Francisco, CA</title>
	<link rel="stylesheet" type="text/css" href="./assets/app.css">
</head>
<body>
	<header class="global-header" role="banner">
		<section>
		  <h1>Puppy image gallery</h1>

		  <blockquote class="header-quote">
		    <p>A dog will teach you unconditional love. If you can have that in your life, things won't be too bad.</p>

		    <cite>&mdash;Robert Wagner</cite>
		  </blockquote>
		</section>
		<div class="header">
			<a>Home</a>
		</div>
	</header>
	<div id="expanded-image-wrapper" onClick="closeExpandedImg()">
		<img src="" alt="" id="expanded-image" />
		<button onClick="closeExpandedImg()">X</button>
	</div>
	<aside id="image-gallery-filters">
		<p>Filter By:</p>
		<select id="sex">
			
		</select>
	</aside>
	<section class="body-content">
		<div id="image-gallery"></div>
	</section>

	<footer class="global-footer">
	  <p>Built by a wonderful developer for Asana.</p>
	</footer>




	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
	<script src="./assets/data/dogs.js"></script>
	<script src="./assets/scripts/lazyload.min.js"></script>

	<script type="text/javascript">
	const DOGS_PER_PAGE = 12;

	createGallery( dogs );

	function expandImg( img ){
		let expanded_img = document.getElementById( 'expanded-image' ),
			expanded_img_wrapper = document.getElementById( 'expanded-image-wrapper' );
			expanded_img.src = img.srcElement.src;
			expanded_img.setAttribute( 'alt', img.srcElement.alt + ' (expanded image)' );
			expanded_img_wrapper.classList.add( 'expand' );
			// $('body').bind('touchmove', function(e){e.preventDefault()})
			document.getElementsByTagName("body")[0].setAttribute( 'style', 'overflow:hidden' );
	}
	
	function closeExpandedImg(){
		let expanded_img_wrapper = document.getElementById( 'expanded-image-wrapper' );
			expanded_img_wrapper.classList.remove( 'expand' );
			document.getElementsByTagName("body")[0].setAttribute( 'style', '' );
	}

	// this function creates the image gallery for the dogs and lazy loads the images
	function createGallery( dogs ){
		let galleryDiv = document.getElementById( 'image-gallery' );

		dogs.map(function( dog, index ){

			let card = document.createElement( "figure" ),
				image = document.createElement( "img" ),
				image_wrapper = document.createElement( "div" ),
				name = document.createTextNode( dog.name ),
				name_holder = document.createElement( "p" ),
				sex = document.createTextNode( ' (' + String(dog.sex).substr(0,1).toUpperCase() + ')' ),
				read_more = document.createElement( "a" ),
				info_wrapper = document.createElement( "figcaption" ),
				description = document.createTextNode( dog.description );

			// add the image
			image.setAttribute( 'data-src', dog.image );
			image.setAttribute( 'alt', dog.name + ' | located in San Francisco | ' + dog.description );
			image.addEventListener( 'click', expandImg.bind( this ) );
			image.classList.add( 'lazyload' );
			image_wrapper.classList.add( 'image-wrapper' );
			image_wrapper.appendChild( image );
			card.appendChild( image_wrapper );

			// add the name of the dog
			name_holder.appendChild( name );
			name_holder.appendChild( sex );
			name_holder.classList.add( 'dog-name' );
			info_wrapper.appendChild( name_holder );

			// add the description of the dog
			info_wrapper.appendChild( description );

			// add the link to the dog page
			read_more.innerHTML = "Read More";
			read_more.classList.add( "button", "button-read-more" );
			info_wrapper.appendChild( read_more );

			card.appendChild( info_wrapper );
			// add all the image cards to the gallery div
			card.classList.add( 'card' );
			galleryDiv.appendChild( card );
		})
	}

	lazyload();



	</script>
</body>
</html>
